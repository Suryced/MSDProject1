{"ast":null,"code":"import _classCallCheck from\"/home/wasadmin/LabFiles/MsdProject/projectday2/project-react-client-crud/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/wasadmin/LabFiles/MsdProject/projectday2/project-react-client-crud/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/wasadmin/LabFiles/MsdProject/projectday2/project-react-client-crud/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/wasadmin/LabFiles/MsdProject/projectday2/project-react-client-crud/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{connect}from'react-redux';import Registration from'./Registration';import{selectRegistration,updateRegistrationFormUsage,getRegistrations}from'../actions';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegistrationList=/*#__PURE__*/function(_React$Component){_inherits(RegistrationList,_React$Component);var _super=_createSuper(RegistrationList);function RegistrationList(props){var _this;_classCallCheck(this,RegistrationList);_this=_super.call(this,props);console.log('in RegistrationList: '+JSON.stringify(_this.props.registrations));return _this;}_createClass(RegistrationList,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.props.fetched){this.props.fetchRules(this.props.fetched);}console.log('mount it!');}},{key:\"lookupEventTitle\",value:function lookupEventTitle(event_id){for(var id in this.props.events){var item=this.props.events[id];if(item.id===event_id){return item.title;}}return'event-title';}},{key:\"lookupCustomerName\",value:function lookupCustomerName(customer_id){for(var id in this.props.customers){var customer=this.props.customers[id];if(customer.id===customer_id){return customer.name;}}return'customer-name';}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{id:\"registration-list\",className:\"card bg-light\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-header\",children:\"Event Registrations\"}),/*#__PURE__*/_jsx(\"table\",{className:\"table\",children:/*#__PURE__*/_jsx(\"tbody\",{children:this.props.registrations.map(function(registration){var event_name=_this2.lookupEventTitle(+registration.event_id);var customer_name=_this2.lookupCustomerName(+registration.customer_id);return/*#__PURE__*/_jsx(Registration,{registration:registration,event_name:event_name,customer_name:customer_name,selectedId:_this2.props.appState.selectedId,onClick:function onClick(){return _this2.props.onRegistrationClick(registration);}},registration.id);})})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{style:{'paddingLeft':'10px'},children:/*#__PURE__*/_jsx(\"input\",{style:{width:'fit-content'},className:\"btn btn-primary\",type:'button',onClick:this.props.handleNewRegistrationClick,value:\"New Registration\"})})]});}}]);return RegistrationList;}(React.Component);var mapStateToProps=function mapStateToProps(state){console.log(JSON.stringify(state.events));return{registrations:state.registrations,appState:state.appState,customers:state.customers,events:state.events};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{fetchRules:function fetchRules(fetched){console.log('in RegistrationList.fetchRules:');dispatch(getRegistrations(dispatch));fetched=true;},onRegistrationClick:function onRegistrationClick(registration){console.log('in RegistrationList.onRegistrationClick:'+JSON.stringify(registration));dispatch(selectRegistration(registration));dispatch(updateRegistrationFormUsage('view',registration));},handleNewRegistrationClick:function handleNewRegistrationClick(){console.log('in RegistrationList.handleNewRegistrationClick:');dispatch(updateRegistrationFormUsage('add'));dispatch(selectRegistration(-1));}};};var VisibleRegistrationList=connect(mapStateToProps,mapDispatchToProps)(RegistrationList);export default VisibleRegistrationList;","map":{"version":3,"names":["React","connect","Registration","selectRegistration","updateRegistrationFormUsage","getRegistrations","jsx","_jsx","jsxs","_jsxs","RegistrationList","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","console","log","JSON","stringify","registrations","_createClass","key","value","componentDidMount","fetched","fetchRules","lookupEventTitle","event_id","id","events","item","title","lookupCustomerName","customer_id","customers","customer","name","render","_this2","className","children","map","registration","event_name","customer_name","selectedId","appState","onClick","onRegistrationClick","style","width","type","handleNewRegistrationClick","Component","mapStateToProps","state","mapDispatchToProps","dispatch","VisibleRegistrationList"],"sources":["/home/wasadmin/LabFiles/MsdProject/projectday2/project-react-client-crud/src/components/RegistrationList.js"],"sourcesContent":["import React from 'react'\nimport { connect } from 'react-redux'\nimport PropTypes from 'prop-types'\nimport Registration from './Registration'\nimport { selectRegistration, updateRegistrationFormUsage, getRegistrations } from '../actions'\n\n\nclass RegistrationList extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log('in RegistrationList: ' + JSON.stringify(this.props.registrations));\n  }\n\n  componentDidMount() {\n    if (!this.props.fetched) {\n      this.props.fetchRules(this.props.fetched);\n    }\n    console.log('mount it!');\n  }\n\n  static propTypes = {\n    registrations: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.number.isRequired\n    }).isRequired).isRequired\n  }\n\n  lookupEventTitle( event_id ){\n    \n    for(let id in this.props.events){\n      let item = this.props.events[id];\n      if( item.id === event_id){\n        return item.title;\n      }\n    }\n    return 'event-title';\n  }\n\n  lookupCustomerName( customer_id ){\n    for(let id in this.props.customers){\n      let customer = this.props.customers[id];\n      if( customer.id === customer_id){\n        return customer.name;\n      }\n    }    \n    return 'customer-name';\n  }\n\n  render() {\n\n    return (\n      <div id='registration-list' className='card bg-light'  >\n        <h4 className='card-header' >Event Registrations</h4>\n        <table className='table'><tbody>\n          {this.props.registrations.map(registration => {\n            let event_name = this.lookupEventTitle(+registration.event_id);\n            let customer_name = this.lookupCustomerName(+registration.customer_id);\n            return (\n              <Registration\n                key={registration.id}\n                registration={registration}\n                event_name={event_name}\n                customer_name={customer_name}\n                selectedId={this.props.appState.selectedId}\n                onClick={() => this.props.onRegistrationClick(registration)}\n              />\n            );\n          }\n          )\n          }\n        </tbody></table>\n        <hr></hr>\n        <p style={{'paddingLeft':'10px'}}>\n        <input style={{width:'fit-content'}} className='btn btn-primary'  type={'button'} onClick={this.props.handleNewRegistrationClick} value=\"New Registration\" />\n          </p>         \n        \n      </div>\n    )\n  }\n}\n\n\nconst mapStateToProps = (state) => {\n  console.log(JSON.stringify(state.events));\n  return {\n    registrations: state.registrations,\n    appState: state.appState,\n    customers: state.customers,\n    events: state.events\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    fetchRules: (fetched) => {\n      console.log('in RegistrationList.fetchRules:');\n      dispatch(getRegistrations(dispatch));\n      fetched = true;\n    },\n    onRegistrationClick: (registration) => {\n      console.log('in RegistrationList.onRegistrationClick:' + JSON.stringify(registration));\n      dispatch(selectRegistration(registration));\n      dispatch(updateRegistrationFormUsage('view', registration));\n    },\n    handleNewRegistrationClick: () => {\n      console.log('in RegistrationList.handleNewRegistrationClick:');\n      dispatch(updateRegistrationFormUsage('add'));\n      dispatch(selectRegistration(-1));\n    }\n  }\n}\n\nconst VisibleRegistrationList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(RegistrationList)\n\nexport default VisibleRegistrationList"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}